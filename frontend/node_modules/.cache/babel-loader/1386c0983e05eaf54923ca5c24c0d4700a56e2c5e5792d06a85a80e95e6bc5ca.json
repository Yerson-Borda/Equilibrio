{"ast":null,"code":"const API_BASE_URL = 'http://127.0.0.1:8000/api/v1';\nclass ApiService {\n  constructor() {\n    this.token = localStorage.getItem('token');\n  }\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem('token', token);\n  }\n  removeToken() {\n    this.token = null;\n    localStorage.removeItem('token');\n  }\n  getAuthHeaders() {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n    return headers;\n  }\n  async handleResponse(response) {\n    console.log('Response status:', response.status);\n    console.log('Response headers:', Object.fromEntries(response.headers.entries()));\n    const text = await response.text();\n    console.log('Response text:', text);\n    let data;\n    try {\n      data = text ? JSON.parse(text) : {};\n    } catch (e) {\n      console.error('JSON parse error:', e);\n      throw {\n        status: response.status,\n        message: 'Invalid JSON response from server',\n        errors: text\n      };\n    }\n    if (!response.ok) {\n      var _data, _data2;\n      throw {\n        status: response.status,\n        message: ((_data = data) === null || _data === void 0 ? void 0 : _data.detail) || 'An error occurred',\n        errors: ((_data2 = data) === null || _data2 === void 0 ? void 0 : _data2.detail) || data\n      };\n    }\n    return data;\n  }\n\n  // Auth endpoints\n  async login(email, password) {\n    console.log('Making login request to:', `${API_BASE_URL}/users/login`);\n    const response = await fetch(`${API_BASE_URL}/users/login?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      mode: 'cors',\n      // Explicitly set CORS mode\n      credentials: 'omit' // Don't send cookies\n    }).catch(error => {\n      console.error('Network error:', error);\n      throw {\n        status: 0,\n        message: 'Network error: Failed to connect to server',\n        errors: 'Check if backend is running on http://127.0.0.1:8000'\n      };\n    });\n    return this.handleResponse(response);\n  }\n  async register(fullName, email, password) {\n    console.log('Making register request to:', `${API_BASE_URL}/users/register`);\n    console.log('Register payload:', {\n      full_name: fullName,\n      email: email,\n      password: password,\n      default_currency: 'USD'\n    });\n    const response = await fetch(`${API_BASE_URL}/users/register`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({\n        full_name: fullName,\n        email: email,\n        password: password,\n        default_currency: 'USD'\n      }),\n      mode: 'cors',\n      credentials: 'omit'\n    }).catch(error => {\n      console.error('Network error:', error);\n      throw {\n        status: 0,\n        message: 'Network error: Failed to connect to server',\n        errors: 'Check if backend is running on http://127.0.0.1:8000'\n      };\n    });\n    return this.handleResponse(response);\n  }\n  async getCurrentUser() {\n    const response = await fetch(`${API_BASE_URL}/users/me`, {\n      method: 'GET',\n      headers: this.getAuthHeaders(),\n      mode: 'cors',\n      credentials: 'omit'\n    }).catch(error => {\n      console.error('Network error:', error);\n      throw {\n        status: 0,\n        message: 'Network error: Failed to connect to server',\n        errors: 'Check if backend is running on http://127.0.0.1:8000'\n      };\n    });\n    return this.handleResponse(response);\n  }\n\n  // Test backend connection\n  async testConnection() {\n    try {\n      const response = await fetch('http://127.0.0.1:8000/health', {\n        method: 'GET',\n        mode: 'cors'\n      });\n      return response.ok;\n    } catch (error) {\n      console.error('Connection test failed:', error);\n      return false;\n    }\n  }\n  isAuthenticated() {\n    return !!this.token;\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","constructor","token","localStorage","getItem","setToken","setItem","removeToken","removeItem","getAuthHeaders","headers","handleResponse","response","console","log","status","Object","fromEntries","entries","text","data","JSON","parse","e","error","message","errors","ok","_data","_data2","detail","login","email","password","fetch","encodeURIComponent","method","mode","credentials","catch","register","fullName","full_name","default_currency","body","stringify","getCurrentUser","testConnection","isAuthenticated","apiService"],"sources":["C:/Users/aswad/Downloads/Development project/Frontend/frontend/src/services/api.jsx"],"sourcesContent":["const API_BASE_URL = 'http://127.0.0.1:8000/api/v1';\r\n\r\nclass ApiService {\r\n    constructor() {\r\n        this.token = localStorage.getItem('token');\r\n    }\r\n\r\n    setToken(token) {\r\n        this.token = token;\r\n        localStorage.setItem('token', token);\r\n    }\r\n\r\n    removeToken() {\r\n        this.token = null;\r\n        localStorage.removeItem('token');\r\n    }\r\n\r\n    getAuthHeaders() {\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n        };\r\n\r\n        if (this.token) {\r\n            headers['Authorization'] = `Bearer ${this.token}`;\r\n        }\r\n\r\n        return headers;\r\n    }\r\n\r\n    async handleResponse(response) {\r\n        console.log('Response status:', response.status);\r\n        console.log('Response headers:', Object.fromEntries(response.headers.entries()));\r\n\r\n        const text = await response.text();\r\n        console.log('Response text:', text);\r\n\r\n        let data;\r\n        try {\r\n            data = text ? JSON.parse(text) : {};\r\n        } catch (e) {\r\n            console.error('JSON parse error:', e);\r\n            throw {\r\n                status: response.status,\r\n                message: 'Invalid JSON response from server',\r\n                errors: text\r\n            };\r\n        }\r\n\r\n        if (!response.ok) {\r\n            throw {\r\n                status: response.status,\r\n                message: data?.detail || 'An error occurred',\r\n                errors: data?.detail || data,\r\n            };\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    // Auth endpoints\r\n    async login(email, password) {\r\n        console.log('Making login request to:', `${API_BASE_URL}/users/login`);\r\n\r\n        const response = await fetch(`${API_BASE_URL}/users/login?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            mode: 'cors', // Explicitly set CORS mode\r\n            credentials: 'omit' // Don't send cookies\r\n        }).catch(error => {\r\n            console.error('Network error:', error);\r\n            throw {\r\n                status: 0,\r\n                message: 'Network error: Failed to connect to server',\r\n                errors: 'Check if backend is running on http://127.0.0.1:8000'\r\n            };\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async register(fullName, email, password) {\r\n        console.log('Making register request to:', `${API_BASE_URL}/users/register`);\r\n        console.log('Register payload:', {\r\n            full_name: fullName,\r\n            email: email,\r\n            password: password,\r\n            default_currency: 'USD'\r\n        });\r\n\r\n        const response = await fetch(`${API_BASE_URL}/users/register`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify({\r\n                full_name: fullName,\r\n                email: email,\r\n                password: password,\r\n                default_currency: 'USD'\r\n            }),\r\n            mode: 'cors',\r\n            credentials: 'omit'\r\n        }).catch(error => {\r\n            console.error('Network error:', error);\r\n            throw {\r\n                status: 0,\r\n                message: 'Network error: Failed to connect to server',\r\n                errors: 'Check if backend is running on http://127.0.0.1:8000'\r\n            };\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async getCurrentUser() {\r\n        const response = await fetch(`${API_BASE_URL}/users/me`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n            mode: 'cors',\r\n            credentials: 'omit'\r\n        }).catch(error => {\r\n            console.error('Network error:', error);\r\n            throw {\r\n                status: 0,\r\n                message: 'Network error: Failed to connect to server',\r\n                errors: 'Check if backend is running on http://127.0.0.1:8000'\r\n            };\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    // Test backend connection\r\n    async testConnection() {\r\n        try {\r\n            const response = await fetch('http://127.0.0.1:8000/health', {\r\n                method: 'GET',\r\n                mode: 'cors'\r\n            });\r\n            return response.ok;\r\n        } catch (error) {\r\n            console.error('Connection test failed:', error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    isAuthenticated() {\r\n        return !!this.token;\r\n    }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"mappings":"AAAA,MAAMA,YAAY,GAAG,8BAA8B;AAEnD,MAAMC,UAAU,CAAC;EACbC,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC9C;EAEAC,QAAQA,CAACH,KAAK,EAAE;IACZ,IAAI,CAACA,KAAK,GAAGA,KAAK;IAClBC,YAAY,CAACG,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;EACxC;EAEAK,WAAWA,CAAA,EAAG;IACV,IAAI,CAACL,KAAK,GAAG,IAAI;IACjBC,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;EACpC;EAEAC,cAAcA,CAAA,EAAG;IACb,MAAMC,OAAO,GAAG;MACZ,cAAc,EAAE;IACpB,CAAC;IAED,IAAI,IAAI,CAACR,KAAK,EAAE;MACZQ,OAAO,CAAC,eAAe,CAAC,GAAG,UAAU,IAAI,CAACR,KAAK,EAAE;IACrD;IAEA,OAAOQ,OAAO;EAClB;EAEA,MAAMC,cAAcA,CAACC,QAAQ,EAAE;IAC3BC,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEF,QAAQ,CAACG,MAAM,CAAC;IAChDF,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEE,MAAM,CAACC,WAAW,CAACL,QAAQ,CAACF,OAAO,CAACQ,OAAO,CAAC,CAAC,CAAC,CAAC;IAEhF,MAAMC,IAAI,GAAG,MAAMP,QAAQ,CAACO,IAAI,CAAC,CAAC;IAClCN,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEK,IAAI,CAAC;IAEnC,IAAIC,IAAI;IACR,IAAI;MACAA,IAAI,GAAGD,IAAI,GAAGE,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC,GAAG,CAAC,CAAC;IACvC,CAAC,CAAC,OAAOI,CAAC,EAAE;MACRV,OAAO,CAACW,KAAK,CAAC,mBAAmB,EAAED,CAAC,CAAC;MACrC,MAAM;QACFR,MAAM,EAAEH,QAAQ,CAACG,MAAM;QACvBU,OAAO,EAAE,mCAAmC;QAC5CC,MAAM,EAAEP;MACZ,CAAC;IACL;IAEA,IAAI,CAACP,QAAQ,CAACe,EAAE,EAAE;MAAA,IAAAC,KAAA,EAAAC,MAAA;MACd,MAAM;QACFd,MAAM,EAAEH,QAAQ,CAACG,MAAM;QACvBU,OAAO,EAAE,EAAAG,KAAA,GAAAR,IAAI,cAAAQ,KAAA,uBAAJA,KAAA,CAAME,MAAM,KAAI,mBAAmB;QAC5CJ,MAAM,EAAE,EAAAG,MAAA,GAAAT,IAAI,cAAAS,MAAA,uBAAJA,MAAA,CAAMC,MAAM,KAAIV;MAC5B,CAAC;IACL;IAEA,OAAOA,IAAI;EACf;;EAEA;EACA,MAAMW,KAAKA,CAACC,KAAK,EAAEC,QAAQ,EAAE;IACzBpB,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE,GAAGf,YAAY,cAAc,CAAC;IAEtE,MAAMa,QAAQ,GAAG,MAAMsB,KAAK,CAAC,GAAGnC,YAAY,sBAAsBoC,kBAAkB,CAACH,KAAK,CAAC,aAAaG,kBAAkB,CAACF,QAAQ,CAAC,EAAE,EAAE;MACpIG,MAAM,EAAE,MAAM;MACd1B,OAAO,EAAE,IAAI,CAACD,cAAc,CAAC,CAAC;MAC9B4B,IAAI,EAAE,MAAM;MAAE;MACdC,WAAW,EAAE,MAAM,CAAC;IACxB,CAAC,CAAC,CAACC,KAAK,CAACf,KAAK,IAAI;MACdX,OAAO,CAACW,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACtC,MAAM;QACFT,MAAM,EAAE,CAAC;QACTU,OAAO,EAAE,4CAA4C;QACrDC,MAAM,EAAE;MACZ,CAAC;IACL,CAAC,CAAC;IAEF,OAAO,IAAI,CAACf,cAAc,CAACC,QAAQ,CAAC;EACxC;EAEA,MAAM4B,QAAQA,CAACC,QAAQ,EAAET,KAAK,EAAEC,QAAQ,EAAE;IACtCpB,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAE,GAAGf,YAAY,iBAAiB,CAAC;IAC5Ec,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE;MAC7B4B,SAAS,EAAED,QAAQ;MACnBT,KAAK,EAAEA,KAAK;MACZC,QAAQ,EAAEA,QAAQ;MAClBU,gBAAgB,EAAE;IACtB,CAAC,CAAC;IAEF,MAAM/B,QAAQ,GAAG,MAAMsB,KAAK,CAAC,GAAGnC,YAAY,iBAAiB,EAAE;MAC3DqC,MAAM,EAAE,MAAM;MACd1B,OAAO,EAAE,IAAI,CAACD,cAAc,CAAC,CAAC;MAC9BmC,IAAI,EAAEvB,IAAI,CAACwB,SAAS,CAAC;QACjBH,SAAS,EAAED,QAAQ;QACnBT,KAAK,EAAEA,KAAK;QACZC,QAAQ,EAAEA,QAAQ;QAClBU,gBAAgB,EAAE;MACtB,CAAC,CAAC;MACFN,IAAI,EAAE,MAAM;MACZC,WAAW,EAAE;IACjB,CAAC,CAAC,CAACC,KAAK,CAACf,KAAK,IAAI;MACdX,OAAO,CAACW,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACtC,MAAM;QACFT,MAAM,EAAE,CAAC;QACTU,OAAO,EAAE,4CAA4C;QACrDC,MAAM,EAAE;MACZ,CAAC;IACL,CAAC,CAAC;IAEF,OAAO,IAAI,CAACf,cAAc,CAACC,QAAQ,CAAC;EACxC;EAEA,MAAMkC,cAAcA,CAAA,EAAG;IACnB,MAAMlC,QAAQ,GAAG,MAAMsB,KAAK,CAAC,GAAGnC,YAAY,WAAW,EAAE;MACrDqC,MAAM,EAAE,KAAK;MACb1B,OAAO,EAAE,IAAI,CAACD,cAAc,CAAC,CAAC;MAC9B4B,IAAI,EAAE,MAAM;MACZC,WAAW,EAAE;IACjB,CAAC,CAAC,CAACC,KAAK,CAACf,KAAK,IAAI;MACdX,OAAO,CAACW,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACtC,MAAM;QACFT,MAAM,EAAE,CAAC;QACTU,OAAO,EAAE,4CAA4C;QACrDC,MAAM,EAAE;MACZ,CAAC;IACL,CAAC,CAAC;IAEF,OAAO,IAAI,CAACf,cAAc,CAACC,QAAQ,CAAC;EACxC;;EAEA;EACA,MAAMmC,cAAcA,CAAA,EAAG;IACnB,IAAI;MACA,MAAMnC,QAAQ,GAAG,MAAMsB,KAAK,CAAC,8BAA8B,EAAE;QACzDE,MAAM,EAAE,KAAK;QACbC,IAAI,EAAE;MACV,CAAC,CAAC;MACF,OAAOzB,QAAQ,CAACe,EAAE;IACtB,CAAC,CAAC,OAAOH,KAAK,EAAE;MACZX,OAAO,CAACW,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,OAAO,KAAK;IAChB;EACJ;EAEAwB,eAAeA,CAAA,EAAG;IACd,OAAO,CAAC,CAAC,IAAI,CAAC9C,KAAK;EACvB;AACJ;AAEA,OAAO,MAAM+C,UAAU,GAAG,IAAIjD,UAAU,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}