{"ast":null,"code":"const API_BASE_URL = 'http://127.0.0.1:8000/docs#';\nclass ApiService {\n  constructor() {\n    this.token = localStorage.getItem('token');\n  }\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem('token', token);\n  }\n  getAuthHeaders() {\n    return {\n      'Content-Type': 'application/json',\n      ...(this.token && {\n        'Authorization': `Bearer ${this.token}`\n      })\n    };\n  }\n  async handleResponse(response) {\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw {\n        status: response.status,\n        message: (errorData === null || errorData === void 0 ? void 0 : errorData.detail) || 'An error occurred',\n        errors: (errorData === null || errorData === void 0 ? void 0 : errorData.detail) || []\n      };\n    }\n    return response.json();\n  }\n\n  // ✅ FIXED LOGIN (uses query params instead of JSON body)\n  async login(email, password) {\n    const url = new URL(`${API_BASE_URL}/users/login_api_v1_users_login_post`);\n    url.searchParams.append('email', email);\n    url.searchParams.append('password', password);\n    const response = await fetch(url, {\n      method: 'POST'\n      //headers: this.getAuthHeaders(),\n    });\n    const data = await this.handleResponse(response);\n    if (data.access_token) {\n      this.setToken(data.access_token);\n    }\n    return data;\n  }\n\n  // ✅ REGISTER works fine (backend expects JSON)\n  async register(fullName, email, password) {\n    const response = await fetch(`${API_BASE_URL}/users/register`, {\n      method: 'POST',\n      //headers: this.getAuthHeaders(),\n      body: JSON.stringify({\n        full_name: fullName,\n        email: email,\n        password: password\n      })\n    });\n    return this.handleResponse(response);\n  }\n\n  /*async getCurrentUser() {\r\n      const response = await fetch(`${API_BASE_URL}/users/me`, {\r\n          method: 'GET',\r\n          headers: this.getAuthHeaders(),\r\n      });\r\n        return this.handleResponse(response);\r\n  }\r\n    // Wallets\r\n  async getWallets() {\r\n      const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n          method: 'GET',\r\n          headers: this.getAuthHeaders(),\r\n      });\r\n        return this.handleResponse(response);\r\n  }\r\n    async createWallet(walletData) {\r\n      const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n          method: 'POST',\r\n          headers: this.getAuthHeaders(),\r\n          body: JSON.stringify(walletData),\r\n      });\r\n        return this.handleResponse(response);\r\n  }\r\n    async getWallet(walletId) {\r\n      const response = await fetch(`${API_BASE_URL}/wallets/${walletId}`, {\r\n          method: 'GET',\r\n          headers: this.getAuthHeaders(),\r\n      });\r\n        return this.handleResponse(response);\r\n  }*/\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","constructor","token","localStorage","getItem","setToken","setItem","getAuthHeaders","handleResponse","response","ok","errorData","json","catch","status","message","detail","errors","login","email","password","url","URL","searchParams","append","fetch","method","data","access_token","register","fullName","body","JSON","stringify","full_name","apiService"],"sources":["C:/Users/aswad/Downloads/Development project/Frontend/frontend/src/services/api.jsx"],"sourcesContent":["const API_BASE_URL = 'http://127.0.0.1:8000/docs#';\r\n\r\nclass ApiService {\r\n    constructor() {\r\n        this.token = localStorage.getItem('token');\r\n    }\r\n\r\n    setToken(token) {\r\n        this.token = token;\r\n        localStorage.setItem('token', token);\r\n    }\r\n\r\n    getAuthHeaders() {\r\n        return {\r\n            'Content-Type': 'application/json',\r\n            ...(this.token && { 'Authorization': `Bearer ${this.token}` }),\r\n        };\r\n    }\r\n\r\n    async handleResponse(response) {\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => null);\r\n            throw {\r\n                status: response.status,\r\n                message: errorData?.detail || 'An error occurred',\r\n                errors: errorData?.detail || [],\r\n            };\r\n        }\r\n        return response.json();\r\n    }\r\n\r\n    // ✅ FIXED LOGIN (uses query params instead of JSON body)\r\n    async login(email, password) {\r\n        const url = new URL(`${API_BASE_URL}/users/login_api_v1_users_login_post`);\r\n        url.searchParams.append('email', email);\r\n        url.searchParams.append('password', password);\r\n\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            //headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        const data = await this.handleResponse(response);\r\n\r\n        if (data.access_token) {\r\n            this.setToken(data.access_token);\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    // ✅ REGISTER works fine (backend expects JSON)\r\n    async register(fullName, email, password) {\r\n        const response = await fetch(`${API_BASE_URL}/users/register`, {\r\n            method: 'POST',\r\n            //headers: this.getAuthHeaders(),\r\n            body: JSON.stringify({\r\n                full_name: fullName,\r\n                email: email,\r\n                password: password,\r\n            }),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    /*async getCurrentUser() {\r\n        const response = await fetch(`${API_BASE_URL}/users/me`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    // Wallets\r\n    async getWallets() {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async createWallet(walletData) {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify(walletData),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async getWallet(walletId) {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/${walletId}`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }*/\r\n}\r\n\r\nexport const apiService = new ApiService();\r\n"],"mappings":"AAAA,MAAMA,YAAY,GAAG,6BAA6B;AAElD,MAAMC,UAAU,CAAC;EACbC,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC9C;EAEAC,QAAQA,CAACH,KAAK,EAAE;IACZ,IAAI,CAACA,KAAK,GAAGA,KAAK;IAClBC,YAAY,CAACG,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;EACxC;EAEAK,cAAcA,CAAA,EAAG;IACb,OAAO;MACH,cAAc,EAAE,kBAAkB;MAClC,IAAI,IAAI,CAACL,KAAK,IAAI;QAAE,eAAe,EAAE,UAAU,IAAI,CAACA,KAAK;MAAG,CAAC;IACjE,CAAC;EACL;EAEA,MAAMM,cAAcA,CAACC,QAAQ,EAAE;IAC3B,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;MACd,MAAMC,SAAS,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,IAAI,CAAC;MACzD,MAAM;QACFC,MAAM,EAAEL,QAAQ,CAACK,MAAM;QACvBC,OAAO,EAAE,CAAAJ,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEK,MAAM,KAAI,mBAAmB;QACjDC,MAAM,EAAE,CAAAN,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEK,MAAM,KAAI;MACjC,CAAC;IACL;IACA,OAAOP,QAAQ,CAACG,IAAI,CAAC,CAAC;EAC1B;;EAEA;EACA,MAAMM,KAAKA,CAACC,KAAK,EAAEC,QAAQ,EAAE;IACzB,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAAC,GAAGvB,YAAY,sCAAsC,CAAC;IAC1EsB,GAAG,CAACE,YAAY,CAACC,MAAM,CAAC,OAAO,EAAEL,KAAK,CAAC;IACvCE,GAAG,CAACE,YAAY,CAACC,MAAM,CAAC,UAAU,EAAEJ,QAAQ,CAAC;IAE7C,MAAMX,QAAQ,GAAG,MAAMgB,KAAK,CAACJ,GAAG,EAAE;MAC9BK,MAAM,EAAE;MACR;IACJ,CAAC,CAAC;IAEF,MAAMC,IAAI,GAAG,MAAM,IAAI,CAACnB,cAAc,CAACC,QAAQ,CAAC;IAEhD,IAAIkB,IAAI,CAACC,YAAY,EAAE;MACnB,IAAI,CAACvB,QAAQ,CAACsB,IAAI,CAACC,YAAY,CAAC;IACpC;IAEA,OAAOD,IAAI;EACf;;EAEA;EACA,MAAME,QAAQA,CAACC,QAAQ,EAAEX,KAAK,EAAEC,QAAQ,EAAE;IACtC,MAAMX,QAAQ,GAAG,MAAMgB,KAAK,CAAC,GAAG1B,YAAY,iBAAiB,EAAE;MAC3D2B,MAAM,EAAE,MAAM;MACd;MACAK,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACjBC,SAAS,EAAEJ,QAAQ;QACnBX,KAAK,EAAEA,KAAK;QACZC,QAAQ,EAAEA;MACd,CAAC;IACL,CAAC,CAAC;IAEF,OAAO,IAAI,CAACZ,cAAc,CAACC,QAAQ,CAAC;EACxC;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AAEA,OAAO,MAAM0B,UAAU,GAAG,IAAInC,UAAU,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}