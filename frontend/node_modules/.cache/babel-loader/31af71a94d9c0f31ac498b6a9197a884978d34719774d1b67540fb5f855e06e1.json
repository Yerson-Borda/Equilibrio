{"ast":null,"code":"const API_BASE_URL = 'http://127.0.0.1:8000/api/v1';\nclass ApiService {\n  constructor() {\n    this.token = localStorage.getItem('token');\n  }\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem('token', token);\n  }\n  removeToken() {\n    this.token = null;\n    localStorage.removeItem('token');\n  }\n  getAuthHeaders() {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n    return headers;\n  }\n  async handleResponse(response) {\n    const data = await response.json().catch(() => null);\n    if (!response.ok) {\n      throw {\n        status: response.status,\n        message: (data === null || data === void 0 ? void 0 : data.detail) || 'An error occurred',\n        errors: (data === null || data === void 0 ? void 0 : data.detail) || data\n      };\n    }\n    return data;\n  }\n\n  // Auth endpoints - Fixed to match OpenAPI spec exactly\n  async login(email, password) {\n    const response = await fetch(`${API_BASE_URL}/users/login?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`, {\n      method: 'POST',\n      headers: this.getAuthHeaders()\n    });\n    const data = await this.handleResponse(response);\n    if (data.access_token) {\n      this.setToken(data.access_token);\n    }\n    return data;\n  }\n  async register(fullName, email, password) {\n    const response = await fetch(`${API_BASE_URL}/users/register`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({\n        full_name: fullName,\n        email: email,\n        password: password,\n        default_currency: 'USD'\n      })\n    });\n    return this.handleResponse(response);\n  }\n  async getCurrentUser() {\n    const response = await fetch(`${API_BASE_URL}/users/me`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Wallet endpoints\n  async getWallets() {\n    const response = await fetch(`${API_BASE_URL}/wallets/`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n  async createWallet(walletData) {\n    const response = await fetch(`${API_BASE_URL}/wallets/`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify(walletData)\n    });\n    return this.handleResponse(response);\n  }\n  async getWallet(walletId) {\n    const response = await fetch(`${API_BASE_URL}/wallets/${walletId}`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Check if user is authenticated\n  isAuthenticated() {\n    return !!this.token;\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","constructor","token","localStorage","getItem","setToken","setItem","removeToken","removeItem","getAuthHeaders","headers","handleResponse","response","data","json","catch","ok","status","message","detail","errors","login","email","password","fetch","encodeURIComponent","method","access_token","register","fullName","body","JSON","stringify","full_name","default_currency","getCurrentUser","getWallets","createWallet","walletData","getWallet","walletId","isAuthenticated","apiService"],"sources":["C:/Users/aswad/Downloads/Development project/Frontend/frontend/src/services/api.jsx"],"sourcesContent":["const API_BASE_URL = 'http://127.0.0.1:8000/api/v1';\r\n\r\nclass ApiService {\r\n    constructor() {\r\n        this.token = localStorage.getItem('token');\r\n    }\r\n\r\n    setToken(token) {\r\n        this.token = token;\r\n        localStorage.setItem('token', token);\r\n    }\r\n\r\n    removeToken() {\r\n        this.token = null;\r\n        localStorage.removeItem('token');\r\n    }\r\n\r\n    getAuthHeaders() {\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n        };\r\n\r\n        if (this.token) {\r\n            headers['Authorization'] = `Bearer ${this.token}`;\r\n        }\r\n\r\n        return headers;\r\n    }\r\n\r\n    async handleResponse(response) {\r\n        const data = await response.json().catch(() => null);\r\n\r\n        if (!response.ok) {\r\n            throw {\r\n                status: response.status,\r\n                message: data?.detail || 'An error occurred',\r\n                errors: data?.detail || data,\r\n            };\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    // Auth endpoints - Fixed to match OpenAPI spec exactly\r\n    async login(email, password) {\r\n        const response = await fetch(`${API_BASE_URL}/users/login?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        const data = await this.handleResponse(response);\r\n\r\n        if (data.access_token) {\r\n            this.setToken(data.access_token);\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    async register(fullName, email, password) {\r\n        const response = await fetch(`${API_BASE_URL}/users/register`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify({\r\n                full_name: fullName,\r\n                email: email,\r\n                password: password,\r\n                default_currency: 'USD'\r\n            }),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async getCurrentUser() {\r\n        const response = await fetch(`${API_BASE_URL}/users/me`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    // Wallet endpoints\r\n    async getWallets() {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async createWallet(walletData) {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify(walletData),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async getWallet(walletId) {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/${walletId}`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    // Check if user is authenticated\r\n    isAuthenticated() {\r\n        return !!this.token;\r\n    }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}