{"ast":null,"code":"const API_BASE_URL = 'http://localhost:8000/api/v1';\nclass ApiService {\n  constructor() {\n    this.token = localStorage.getItem('token');\n  }\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem('token', token);\n  }\n  getAuthHeaders() {\n    return {\n      'Content-Type': 'application/json',\n      ...(this.token && {\n        'Authorization': `Bearer ${this.token}`\n      })\n    };\n  }\n  async handleResponse(response) {\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw {\n        status: response.status,\n        message: (errorData === null || errorData === void 0 ? void 0 : errorData.detail) || 'An error occurred',\n        errors: (errorData === null || errorData === void 0 ? void 0 : errorData.detail) || []\n      };\n    }\n    return response.json();\n  }\n\n  // Auth endpoints\n  async login(email, password) {\n    const response = await fetch(`${API_BASE_URL}/users/login`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({\n        username: email,\n        // Note: API expects 'username' but we're using email\n        password: password\n      })\n    });\n    const data = await this.handleResponse(response);\n    if (data.access_token) {\n      this.setToken(data.access_token);\n    }\n    return data;\n  }\n  async register(fullName, email, password) {\n    const response = await fetch(`${API_BASE_URL}/users/register`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({\n        full_name: fullName,\n        email: email,\n        password: password\n      })\n    });\n    return this.handleResponse(response);\n  }\n  async getCurrentUser() {\n    const response = await fetch(`${API_BASE_URL}/users/me`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Wallet endpoints\n  async getWallets() {\n    const response = await fetch(`${API_BASE_URL}/wallets/`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n  async createWallet(walletData) {\n    const response = await fetch(`${API_BASE_URL}/wallets/`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify(walletData)\n    });\n    return this.handleResponse(response);\n  }\n  async getWallet(walletId) {\n    const response = await fetch(`${API_BASE_URL}/wallets/${walletId}`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","constructor","token","localStorage","getItem","setToken","setItem","getAuthHeaders","handleResponse","response","ok","errorData","json","catch","status","message","detail","errors","login","email","password","fetch","method","headers","body","JSON","stringify","username","data","access_token","register","fullName","full_name","getCurrentUser","getWallets","createWallet","walletData","getWallet","walletId","apiService"],"sources":["C:/Users/aswad/Downloads/Development project/Frontend/frontend/src/services/api.jsx"],"sourcesContent":["const API_BASE_URL = 'http://localhost:8000/api/v1';\r\n\r\nclass ApiService {\r\n    constructor() {\r\n        this.token = localStorage.getItem('token');\r\n    }\r\n\r\n    setToken(token) {\r\n        this.token = token;\r\n        localStorage.setItem('token', token);\r\n    }\r\n\r\n    getAuthHeaders() {\r\n        return {\r\n            'Content-Type': 'application/json',\r\n            ...(this.token && { 'Authorization': `Bearer ${this.token}` }),\r\n        };\r\n    }\r\n\r\n    async handleResponse(response) {\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => null);\r\n            throw {\r\n                status: response.status,\r\n                message: errorData?.detail || 'An error occurred',\r\n                errors: errorData?.detail || [],\r\n            };\r\n        }\r\n        return response.json();\r\n    }\r\n\r\n    // Auth endpoints\r\n    async login(email, password) {\r\n        const response = await fetch(`${API_BASE_URL}/users/login`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify({\r\n                username: email, // Note: API expects 'username' but we're using email\r\n                password: password,\r\n            }),\r\n        });\r\n\r\n        const data = await this.handleResponse(response);\r\n\r\n        if (data.access_token) {\r\n            this.setToken(data.access_token);\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    async register(fullName, email, password) {\r\n        const response = await fetch(`${API_BASE_URL}/users/register`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify({\r\n                full_name: fullName,\r\n                email: email,\r\n                password: password,\r\n            }),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async getCurrentUser() {\r\n        const response = await fetch(`${API_BASE_URL}/users/me`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    // Wallet endpoints\r\n    async getWallets() {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async createWallet(walletData) {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify(walletData),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async getWallet(walletId) {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/${walletId}`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}