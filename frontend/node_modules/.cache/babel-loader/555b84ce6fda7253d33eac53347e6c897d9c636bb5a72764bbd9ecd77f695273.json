{"ast":null,"code":"const API_BASE_URL = 'http://127.0.0.1:8000/api/v1';\nclass ApiService {\n  constructor() {\n    this.token = localStorage.getItem('token');\n  }\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem('token', token);\n  }\n  removeToken() {\n    this.token = null;\n    localStorage.removeItem('token');\n  }\n  getAuthHeaders() {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n    return headers;\n  }\n  async handleResponse(response) {\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({\n        detail: 'An error occurred'\n      }));\n      throw {\n        status: response.status,\n        message: errorData.detail || 'An error occurred',\n        errors: errorData.detail || errorData\n      };\n    }\n    return response.json();\n  }\n\n  // Auth endpoints - FIXED based on OpenAPI spec\n  async login(email, password) {\n    // According to OpenAPI, login uses query parameters, not JSON body\n    const queryParams = new URLSearchParams({\n      email: email,\n      password: password\n    });\n    const response = await fetch(`${API_BASE_URL}/users/login?${queryParams}`, {\n      method: 'POST',\n      headers: this.getAuthHeaders()\n    });\n    const data = await this.handleResponse(response);\n    if (data.access_token) {\n      this.setToken(data.access_token);\n    }\n    return data;\n  }\n  async register(fullName, email, password) {\n    const response = await fetch(`${API_BASE_URL}/users/register`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({\n        full_name: fullName,\n        email: email,\n        password: password,\n        // Add default_currency as per OpenAPI spec\n        default_currency: 'USD'\n      })\n    });\n    return this.handleResponse(response);\n  }\n  async getCurrentUser() {\n    const response = await fetch(`${API_BASE_URL}/users/me`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Wallet endpoints\n  async getWallets() {\n    const response = await fetch(`${API_BASE_URL}/wallets/`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n  async createWallet(walletData) {\n    const response = await fetch(`${API_BASE_URL}/wallets/`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify(walletData)\n    });\n    return this.handleResponse(response);\n  }\n  async getWallet(walletId) {\n    const response = await fetch(`${API_BASE_URL}/wallets/${walletId}`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","constructor","token","localStorage","getItem","setToken","setItem","removeToken","removeItem","getAuthHeaders","headers","handleResponse","response","ok","errorData","json","catch","detail","status","message","errors","login","email","password","queryParams","URLSearchParams","fetch","method","data","access_token","register","fullName","body","JSON","stringify","full_name","default_currency","getCurrentUser","getWallets","createWallet","walletData","getWallet","walletId","apiService"],"sources":["C:/Users/aswad/Downloads/Development project/Frontend/frontend/src/services/api.jsx"],"sourcesContent":["const API_BASE_URL = 'http://127.0.0.1:8000/api/v1';\r\n\r\nclass ApiService {\r\n    constructor() {\r\n        this.token = localStorage.getItem('token');\r\n    }\r\n\r\n    setToken(token) {\r\n        this.token = token;\r\n        localStorage.setItem('token', token);\r\n    }\r\n\r\n    removeToken() {\r\n        this.token = null;\r\n        localStorage.removeItem('token');\r\n    }\r\n\r\n    getAuthHeaders() {\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n        };\r\n\r\n        if (this.token) {\r\n            headers['Authorization'] = `Bearer ${this.token}`;\r\n        }\r\n\r\n        return headers;\r\n    }\r\n\r\n    async handleResponse(response) {\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => ({\r\n                detail: 'An error occurred'\r\n            }));\r\n\r\n            throw {\r\n                status: response.status,\r\n                message: errorData.detail || 'An error occurred',\r\n                errors: errorData.detail || errorData,\r\n            };\r\n        }\r\n        return response.json();\r\n    }\r\n\r\n    // Auth endpoints - FIXED based on OpenAPI spec\r\n    async login(email, password) {\r\n        // According to OpenAPI, login uses query parameters, not JSON body\r\n        const queryParams = new URLSearchParams({\r\n            email: email,\r\n            password: password\r\n        });\r\n\r\n        const response = await fetch(`${API_BASE_URL}/users/login?${queryParams}`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        const data = await this.handleResponse(response);\r\n\r\n        if (data.access_token) {\r\n            this.setToken(data.access_token);\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    async register(fullName, email, password) {\r\n        const response = await fetch(`${API_BASE_URL}/users/register`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify({\r\n                full_name: fullName,\r\n                email: email,\r\n                password: password,\r\n                // Add default_currency as per OpenAPI spec\r\n                default_currency: 'USD'\r\n            }),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async getCurrentUser() {\r\n        const response = await fetch(`${API_BASE_URL}/users/me`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    // Wallet endpoints\r\n    async getWallets() {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async createWallet(walletData) {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify(walletData),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async getWallet(walletId) {\r\n        const response = await fetch(`${API_BASE_URL}/wallets/${walletId}`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}