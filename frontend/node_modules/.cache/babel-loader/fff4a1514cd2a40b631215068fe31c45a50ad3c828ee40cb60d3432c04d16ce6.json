{"ast":null,"code":"// src/services/api.js\n// With proxy, we can use relative URLs in development\nconst API_BASE_URL = '/api/v1';\nclass ApiService {\n  constructor() {\n    this.token = localStorage.getItem('token');\n  }\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem('token', token);\n  }\n  removeToken() {\n    this.token = null;\n    localStorage.removeItem('token');\n  }\n  getAuthHeaders() {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n    return headers;\n  }\n  async handleResponse(response) {\n    console.log('Response status:', response.status);\n    const text = await response.text();\n    console.log('Response text:', text);\n    let data;\n    try {\n      data = text ? JSON.parse(text) : {};\n    } catch (e) {\n      console.error('JSON parse error:', e);\n      throw {\n        status: response.status,\n        message: 'Invalid JSON response from server',\n        errors: text\n      };\n    }\n    if (!response.ok) {\n      var _data, _data2;\n      throw {\n        status: response.status,\n        message: ((_data = data) === null || _data === void 0 ? void 0 : _data.detail) || 'An error occurred',\n        errors: ((_data2 = data) === null || _data2 === void 0 ? void 0 : _data2.detail) || data\n      };\n    }\n    return data;\n  }\n\n  // Auth endpoints\n  async login(email, password) {\n    console.log('Making login request to:', `${API_BASE_URL}/users/login`);\n    const params = new URLSearchParams();\n    params.append('email', email);\n    params.append('password', password);\n    const response = await fetch(`${API_BASE_URL}/users/login?${params}`, {\n      method: 'POST',\n      headers: this.getAuthHeaders()\n    }).catch(error => {\n      console.error('Network error:', error);\n      throw {\n        status: 0,\n        message: 'Cannot connect to server. Please ensure: 1) Backend is running on http://127.0.0.1:8000, 2) You restarted React after adding proxy',\n        errors: error.message\n      };\n    });\n    return this.handleResponse(response);\n  }\n  async register(fullName, email, password) {\n    console.log('Making register request to:', `${API_BASE_URL}/users/register`);\n    const response = await fetch(`${API_BASE_URL}/users/register`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({\n        full_name: fullName,\n        email: email,\n        password: password,\n        default_currency: 'USD'\n      })\n    }).catch(error => {\n      console.error('Network error:', error);\n      throw {\n        status: 0,\n        message: 'Cannot connect to server. Please ensure: 1) Backend is running on http://127.0.0.1:8000, 2) You restarted React after adding proxy',\n        errors: error.message\n      };\n    });\n    return this.handleResponse(response);\n  }\n  async getCurrentUser() {\n    const response = await fetch(`${API_BASE_URL}/users/me`, {\n      method: 'GET',\n      headers: this.getAuthHeaders()\n    }).catch(error => {\n      console.error('Network error:', error);\n      throw {\n        status: 0,\n        message: 'Cannot connect to server. Please ensure: 1) Backend is running on http://127.0.0.1:8000, 2) You restarted React after adding proxy',\n        errors: error.message\n      };\n    });\n    return this.handleResponse(response);\n  }\n\n  // Test backend connection\n  async testConnection() {\n    try {\n      const response = await fetch('/health', {\n        method: 'GET'\n      });\n      return response.ok;\n    } catch (error) {\n      console.error('Connection test failed:', error);\n      return false;\n    }\n  }\n  isAuthenticated() {\n    return !!this.token;\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","constructor","token","localStorage","getItem","setToken","setItem","removeToken","removeItem","getAuthHeaders","headers","handleResponse","response","console","log","status","text","data","JSON","parse","e","error","message","errors","ok","_data","_data2","detail","login","email","password","params","URLSearchParams","append","fetch","method","catch","register","fullName","body","stringify","full_name","default_currency","getCurrentUser","testConnection","isAuthenticated","apiService"],"sources":["C:/Users/aswad/Downloads/Development project/Frontend/frontend/src/services/api.jsx"],"sourcesContent":["// src/services/api.js\r\n// With proxy, we can use relative URLs in development\r\nconst API_BASE_URL = '/api/v1';\r\n\r\nclass ApiService {\r\n    constructor() {\r\n        this.token = localStorage.getItem('token');\r\n    }\r\n\r\n    setToken(token) {\r\n        this.token = token;\r\n        localStorage.setItem('token', token);\r\n    }\r\n\r\n    removeToken() {\r\n        this.token = null;\r\n        localStorage.removeItem('token');\r\n    }\r\n\r\n    getAuthHeaders() {\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n        };\r\n\r\n        if (this.token) {\r\n            headers['Authorization'] = `Bearer ${this.token}`;\r\n        }\r\n\r\n        return headers;\r\n    }\r\n\r\n    async handleResponse(response) {\r\n        console.log('Response status:', response.status);\r\n\r\n        const text = await response.text();\r\n        console.log('Response text:', text);\r\n\r\n        let data;\r\n        try {\r\n            data = text ? JSON.parse(text) : {};\r\n        } catch (e) {\r\n            console.error('JSON parse error:', e);\r\n            throw {\r\n                status: response.status,\r\n                message: 'Invalid JSON response from server',\r\n                errors: text\r\n            };\r\n        }\r\n\r\n        if (!response.ok) {\r\n            throw {\r\n                status: response.status,\r\n                message: data?.detail || 'An error occurred',\r\n                errors: data?.detail || data,\r\n            };\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    // Auth endpoints\r\n    async login(email, password) {\r\n        console.log('Making login request to:', `${API_BASE_URL}/users/login`);\r\n\r\n        const params = new URLSearchParams();\r\n        params.append('email', email);\r\n        params.append('password', password);\r\n\r\n        const response = await fetch(`${API_BASE_URL}/users/login?${params}`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n        }).catch(error => {\r\n            console.error('Network error:', error);\r\n            throw {\r\n                status: 0,\r\n                message: 'Cannot connect to server. Please ensure: 1) Backend is running on http://127.0.0.1:8000, 2) You restarted React after adding proxy',\r\n                errors: error.message\r\n            };\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async register(fullName, email, password) {\r\n        console.log('Making register request to:', `${API_BASE_URL}/users/register`);\r\n\r\n        const response = await fetch(`${API_BASE_URL}/users/register`, {\r\n            method: 'POST',\r\n            headers: this.getAuthHeaders(),\r\n            body: JSON.stringify({\r\n                full_name: fullName,\r\n                email: email,\r\n                password: password,\r\n                default_currency: 'USD'\r\n            }),\r\n        }).catch(error => {\r\n            console.error('Network error:', error);\r\n            throw {\r\n                status: 0,\r\n                message: 'Cannot connect to server. Please ensure: 1) Backend is running on http://127.0.0.1:8000, 2) You restarted React after adding proxy',\r\n                errors: error.message\r\n            };\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    async getCurrentUser() {\r\n        const response = await fetch(`${API_BASE_URL}/users/me`, {\r\n            method: 'GET',\r\n            headers: this.getAuthHeaders(),\r\n        }).catch(error => {\r\n            console.error('Network error:', error);\r\n            throw {\r\n                status: 0,\r\n                message: 'Cannot connect to server. Please ensure: 1) Backend is running on http://127.0.0.1:8000, 2) You restarted React after adding proxy',\r\n                errors: error.message\r\n            };\r\n        });\r\n\r\n        return this.handleResponse(response);\r\n    }\r\n\r\n    // Test backend connection\r\n    async testConnection() {\r\n        try {\r\n            const response = await fetch('/health', {\r\n                method: 'GET',\r\n            });\r\n            return response.ok;\r\n        } catch (error) {\r\n            console.error('Connection test failed:', error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    isAuthenticated() {\r\n        return !!this.token;\r\n    }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}